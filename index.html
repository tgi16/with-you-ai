<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>With You Photo Studio - AI Assistant</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Padauk:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Padauk', sans-serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        
        /* Hide Scrollbar */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Modern Glass Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .glass-nav {
            background: rgba(9, 9, 11, 0.85);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Input Fields */
        .input-field {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(244, 114, 182, 0.5); /* Pink-400 */
            box-shadow: 0 0 0 2px rgba(244, 114, 182, 0.1);
        }

        /* Loading Animation */
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Markdown Output Styling */
        .prose { color: #e4e4e7; max-width: none; }
        .prose h1, .prose h2, .prose h3 { color: #f472b6; font-weight: 700; margin-top: 1.2em; margin-bottom: 0.6em; }
        .prose strong { color: #fff; font-weight: 600; }
        .prose ul { list-style-type: none; padding-left: 0; }
        .prose li { position: relative; padding-left: 1.5em; margin-bottom: 0.5em; }
        .prose li::before { content: "‚Ä¢"; color: #f472b6; position: absolute; left: 0; font-weight: bold; }
        .prose blockquote { border-left-color: #f472b6; background: rgba(244, 114, 182, 0.1); padding: 0.5em 1em; border-radius: 0 8px 8px 0; font-style: normal; }
        
        /* Mobile Text Wrapping */
        .break-words { overflow-wrap: break-word; word-wrap: break-word; }

        /* Button Gradient */
        .btn-gradient {
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
        }
        .btn-gradient:hover {
            background: linear-gradient(135deg, #db2777 0%, #be185d 100%);
        }
    </style>
</head>
<body class="bg-neutral-950 text-zinc-100 min-h-screen flex flex-col overflow-hidden selection:bg-pink-500/30">

    <!-- HEADER -->
    <header class="flex-none px-6 py-5 flex justify-between items-center z-10">
        <div>
            <h1 class="text-2xl font-bold font-inter tracking-tight bg-gradient-to-r from-white via-pink-200 to-pink-400 text-transparent bg-clip-text">With You</h1>
            <p class="text-[10px] text-zinc-500 font-inter tracking-[0.2em] uppercase mt-0.5">Studio AI Assistant</p>
        </div>
        <div class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center shadow-lg shadow-pink-500/5">
            <i data-lucide="aperture" class="w-5 h-5 text-pink-400"></i>
        </div>
    </header>

    <!-- MAIN SCROLLABLE CONTENT -->
    <main class="flex-1 overflow-y-auto p-4 pb-36 hide-scrollbar relative">
        
        <!-- 1. POSE HELPER TAB -->
        <div id="tab-pose" class="tab-content space-y-6 animate-fade-in">
            <div class="glass-card p-5 rounded-3xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-pink-500/10 rounded-full blur-3xl -mr-10 -mt-10"></div>
                <div class="flex items-center gap-4 mb-2 relative z-10">
                    <div class="p-3 bg-gradient-to-br from-pink-500/20 to-transparent rounded-2xl border border-pink-500/20 text-pink-400 shadow-lg shadow-pink-500/10">
                        <i data-lucide="camera" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-lg text-white">Pose Director</h2>
                        <p class="text-xs text-zinc-400">Smart posing guide for couples</p>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-1.5">
                        <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Scene</label>
                        <div class="relative">
                            <select id="pose-scene" class="w-full input-field text-sm rounded-2xl px-4 py-3.5 appearance-none text-zinc-200 focus:outline-none">
                                <option value="Outdoor Nature">üåø Outdoor Nature</option>
                                <option value="Minimal Studio">üí° Minimal Studio</option>
                                <option value="Vintage Cafe">‚òï Vintage Cafe</option>
                                <option value="Night Street">üåÉ Night Street</option>
                                <option value="Traditional">üå∏ Myanmar Traditional</option>
                            </select>
                            <i data-lucide="chevron-down" class="absolute right-3 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                        </div>
                    </div>
                    <div class="space-y-1.5">
                        <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Vibe</label>
                        <div class="relative">
                            <select id="pose-mood" class="w-full input-field text-sm rounded-2xl px-4 py-3.5 appearance-none text-zinc-200 focus:outline-none">
                                <option value="Romantic & Intimate">üíû Romantic</option>
                                <option value="Fun & Candid">üòÇ Fun & Candid</option>
                                <option value="Chic & Editorial">üòé Editorial Chic</option>
                                <option value="Emotional">ü•∫ Emotional</option>
                            </select>
                            <i data-lucide="chevron-down" class="absolute right-3 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                        </div>
                    </div>
                </div>

                <div class="space-y-1.5">
                    <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Specific Details</label>
                    <textarea id="pose-input" rows="2" placeholder="·Ä•·Äï·Äô·Ä¨ - ·Äû·Äê·Ä≠·ÄØ·Ä∑·Äû·Ä¨·Ä∏·ÄÄ ·Äõ·Äæ·ÄÄ·Ä∫·Äê·Äê·Ä∫·Äê·Äö·Ä∫·Åä ·Ä°·Äõ·Äï·Ä∫·ÄÄ·ÄΩ·Ä¨·Äî·Ä±·Äê·Äö·Ä∫..." 
                        class="w-full input-field text-sm rounded-2xl px-4 py-3.5 text-zinc-200 focus:outline-none placeholder:text-zinc-600 resize-none"></textarea>
                </div>

                <button onclick="generateContent('pose')" class="w-full btn-gradient text-white font-bold py-4 rounded-2xl shadow-lg shadow-pink-500/25 active:scale-[0.98] transition flex justify-center items-center gap-2.5">
                    <i data-lucide="sparkles" class="w-5 h-5"></i> <span>Generate Magic</span>
                </button>
            </div>

            <div id="result-pose" class="hidden space-y-2">
                <div class="flex justify-between items-end px-1">
                    <span class="text-[10px] font-bold text-pink-400 uppercase tracking-widest">Suggestion</span>
                    <button onclick="copyToClipboard('output-pose')" class="text-zinc-500 hover:text-white transition"><i data-lucide="copy" class="w-4 h-4"></i></button>
                </div>
                <div class="glass-card rounded-3xl p-6 border-pink-500/20">
                    <div id="output-pose" class="prose prose-sm break-words leading-relaxed"></div>
                </div>
            </div>
        </div>

        <!-- 2. FACEBOOK TAB -->
        <div id="tab-facebook" class="tab-content hidden space-y-6">
            <div class="glass-card p-5 rounded-3xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-10 -mt-10"></div>
                <div class="flex items-center gap-4 mb-2 relative z-10">
                    <div class="p-3 bg-gradient-to-br from-blue-500/20 to-transparent rounded-2xl border border-blue-500/20 text-blue-400 shadow-lg shadow-blue-500/10">
                        <i data-lucide="facebook" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-lg text-white">Facebook Pro</h2>
                        <p class="text-xs text-zinc-400">High-engagement post creator</p>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-1.5">
                        <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Format</label>
                        <div class="relative">
                            <select id="fb-type" class="w-full input-field text-sm rounded-2xl px-4 py-3.5 appearance-none text-zinc-200 focus:outline-none">
                                <option value="Photo Caption">üì∏ Caption</option>
                                <option value="Sales Copy">üí∞ Sales/Promo</option>
                                <option value="Storytelling">üìñ Storytelling</option>
                            </select>
                            <i data-lucide="chevron-down" class="absolute right-3 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                        </div>
                    </div>
                    <div class="space-y-1.5">
                        <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Tone</label>
                        <div class="relative">
                            <select id="fb-tone" class="w-full input-field text-sm rounded-2xl px-4 py-3.5 appearance-none text-zinc-200 focus:outline-none">
                                <option value="Warm & Welcoming">üòä Warm</option>
                                <option value="Professional & Elegant">üëî Elegant</option>
                                <option value="Deep & Emotional">ü•∫ Emotional</option>
                                <option value="Exciting & Urgency">üî• Hype</option>
                            </select>
                            <i data-lucide="chevron-down" class="absolute right-3 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                        </div>
                    </div>
                </div>

                <div class="space-y-1.5">
                    <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Key Points / Topic</label>
                    <textarea id="fb-input" rows="3" placeholder="Post ·Äõ·Ä≤·Ä∑ ·Ä°·Äì·Ä≠·ÄÄ·Ä°·ÄÄ·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ä°·Äõ·Ä¨ (Promotion 20% off, New Pre-wedding set...)" 
                        class="w-full input-field text-sm rounded-2xl px-4 py-3.5 text-zinc-200 focus:outline-none placeholder:text-zinc-600 resize-none"></textarea>
                </div>

                <button onclick="generateContent('facebook')" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-600/20 active:scale-[0.98] transition flex justify-center items-center gap-2.5">
                    <i data-lucide="pen-tool" class="w-5 h-5"></i> <span>Write Post</span>
                </button>
            </div>

            <div id="result-facebook" class="hidden space-y-2">
                <div class="flex justify-between items-end px-1">
                    <span class="text-[10px] font-bold text-blue-400 uppercase tracking-widest">Draft Content</span>
                    <button onclick="copyToClipboard('output-facebook')" class="text-zinc-500 hover:text-white transition"><i data-lucide="copy" class="w-4 h-4"></i></button>
                </div>
                <div class="glass-card rounded-3xl p-6 border-blue-500/20">
                    <div id="output-facebook" class="prose prose-sm break-words leading-relaxed"></div>
                </div>
            </div>
        </div>

        <!-- 3. TIKTOK TAB -->
        <div id="tab-tiktok" class="tab-content hidden space-y-6">
            <div class="glass-card p-5 rounded-3xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-fuchsia-500/10 rounded-full blur-3xl -mr-10 -mt-10"></div>
                <div class="flex items-center gap-4 mb-2 relative z-10">
                    <div class="p-3 bg-gradient-to-br from-fuchsia-500/20 to-transparent rounded-2xl border border-fuchsia-500/20 text-fuchsia-400 shadow-lg shadow-fuchsia-500/10">
                        <i data-lucide="clapperboard" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-lg text-white">TikTok Creator</h2>
                        <p class="text-xs text-zinc-400">Viral script writer & director</p>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <div class="space-y-1.5">
                    <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Content Style</label>
                    <div class="relative">
                        <select id="tiktok-style" class="w-full input-field text-sm rounded-2xl px-4 py-3.5 appearance-none text-zinc-200 focus:outline-none">
                            <option value="Aesthetic Vlog">‚ú® Aesthetic Vlog (Voiceover)</option>
                            <option value="Educational Tip">üß† Educational / Tips</option>
                            <option value="Trending Transition">üéµ Music & Transition</option>
                            <option value="Funny Skit">üé≠ Comedy Skit</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-3 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                    </div>
                </div>

                <div class="space-y-1.5">
                    <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Video Idea</label>
                    <textarea id="tiktok-input" rows="3" placeholder="·Äò·Ä¨ Video ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÅ·Äª·ÄÑ·Ä∫·Äú·Ä≤? (Studio Tour, Makeup Transformation...)" 
                        class="w-full input-field text-sm rounded-2xl px-4 py-3.5 text-zinc-200 focus:outline-none placeholder:text-zinc-600 resize-none"></textarea>
                </div>

                <button onclick="generateContent('tiktok')" class="w-full bg-fuchsia-600 hover:bg-fuchsia-500 text-white font-bold py-4 rounded-2xl shadow-lg shadow-fuchsia-600/20 active:scale-[0.98] transition flex justify-center items-center gap-2.5">
                    <i data-lucide="video" class="w-5 h-5"></i> <span>Create Script</span>
                </button>
            </div>

            <div id="result-tiktok" class="hidden space-y-2">
                <div class="flex justify-between items-end px-1">
                    <span class="text-[10px] font-bold text-fuchsia-400 uppercase tracking-widest">Video Script</span>
                    <button onclick="copyToClipboard('output-tiktok')" class="text-zinc-500 hover:text-white transition"><i data-lucide="copy" class="w-4 h-4"></i></button>
                </div>
                <div class="glass-card rounded-3xl p-6 border-fuchsia-500/20">
                    <div id="output-tiktok" class="prose prose-sm break-words leading-relaxed"></div>
                </div>
            </div>
        </div>

        <!-- 4. DM HELPER TAB -->
        <div id="tab-dm" class="tab-content hidden space-y-6">
            <div class="glass-card p-5 rounded-3xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl -mr-10 -mt-10"></div>
                <div class="flex items-center gap-4 mb-2 relative z-10">
                    <div class="p-3 bg-gradient-to-br from-emerald-500/20 to-transparent rounded-2xl border border-emerald-500/20 text-emerald-400 shadow-lg shadow-emerald-500/10">
                        <i data-lucide="message-square" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-lg text-white">Smart Reply</h2>
                        <p class="text-xs text-zinc-400">Close deals with perfect replies</p>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <div class="space-y-1.5">
                    <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Tone</label>
                    <div class="relative">
                        <select id="dm-tone" class="w-full input-field text-sm rounded-2xl px-4 py-3.5 appearance-none text-zinc-200 focus:outline-none">
                            <option value="Professional & Warm">ü§ù Professional & Warm</option>
                            <option value="Friendly & Casual">üòä Friendly (Sis/Bro)</option>
                            <option value="Polite Rejection">‚úã Polite Decline</option>
                            <option value="Apologetic">üôè Apologetic</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-3 top-3.5 w-4 h-4 text-zinc-500 pointer-events-none"></i>
                    </div>
                </div>

                <div class="space-y-1.5">
                    <label class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider ml-1">Client Message</label>
                    <textarea id="dm-input" rows="3" placeholder="Customer ·Äô·Ä±·Ä∏·Äê·Ä≤·Ä∑·ÄÖ·Ä¨ (Package Price?, Date Available?...)" 
                        class="w-full input-field text-sm rounded-2xl px-4 py-3.5 text-zinc-200 focus:outline-none placeholder:text-zinc-600 resize-none"></textarea>
                </div>

                <div class="flex gap-2">
                    <button onclick="quickDm('·Äà·Ä±·Ä∏·Äî·Äæ·ÄØ·Äî·Ä∫·Ä∏·Äò·Äö·Ä∫·Äú·Ä±·Ä¨·ÄÄ·Ä∫·Äú·Ä≤·Äõ·Äæ·ÄÑ·Ä∑·Ä∫? Package ·Äê·ÄΩ·Ä±·Äû·Ä≠·ÄÅ·Äª·ÄÑ·Ä∫·Äï·Ä´·Äê·Äö·Ä∫')" class="flex-1 bg-white/5 hover:bg-white/10 border border-white/5 py-3 rounded-xl text-xs text-zinc-400 transition">üí∞ Ask Price</button>
                    <button onclick="quickDm('Next month 15 ·Äõ·ÄÄ·Ä∫·Äî·Ä±·Ä∑ ·Ä°·Ä¨·Ä∏·Äú·Ä¨·Ä∏?')" class="flex-1 bg-white/5 hover:bg-white/10 border border-white/5 py-3 rounded-xl text-xs text-zinc-400 transition">üìÖ Check Date</button>
                </div>

                <button onclick="generateContent('dm')" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-600/20 active:scale-[0.98] transition flex justify-center items-center gap-2.5">
                    <i data-lucide="send" class="w-5 h-5"></i> <span>Generate Reply</span>
                </button>
            </div>

            <div id="result-dm" class="hidden space-y-2">
                <div class="flex justify-between items-end px-1">
                    <span class="text-[10px] font-bold text-emerald-400 uppercase tracking-widest">Response</span>
                    <button onclick="copyToClipboard('output-dm')" class="text-zinc-500 hover:text-white transition"><i data-lucide="copy" class="w-4 h-4"></i></button>
                </div>
                <div class="glass-card rounded-3xl p-6 border-emerald-500/20">
                    <div id="output-dm" class="prose prose-sm break-words leading-relaxed"></div>
                </div>
            </div>
        </div>
        
        <!-- Loading Overlay -->
        <div id="loading-overlay" class="absolute inset-0 bg-neutral-950/90 backdrop-blur-sm z-50 hidden flex flex-col items-center justify-center">
            <div class="flex space-x-2.5 mb-6">
                <div class="w-3.5 h-3.5 bg-pink-500 rounded-full typing-dot"></div>
                <div class="w-3.5 h-3.5 bg-pink-400 rounded-full typing-dot"></div>
                <div class="w-3.5 h-3.5 bg-pink-300 rounded-full typing-dot"></div>
            </div>
            <p class="text-sm font-medium text-pink-200 animate-pulse font-inter tracking-wide">Crafting brilliance...</p>
        </div>

    </main>

    <!-- BOTTOM NAVIGATION (Glassmorphism) -->
    <nav class="fixed bottom-0 left-0 right-0 glass-nav pb-safe z-40">
        <div class="flex justify-around items-center h-20 max-w-md mx-auto px-4">
            <button onclick="switchTab('pose')" id="nav-pose" class="nav-btn group flex flex-col items-center justify-center w-full h-full text-pink-500 transition-all duration-300">
                <div class="mb-1 p-1.5 rounded-xl group-hover:bg-white/5 transition-colors">
                    <i data-lucide="camera" class="w-6 h-6 transition-transform group-active:scale-90"></i>
                </div>
                <span class="text-[10px] font-medium opacity-100">Pose</span>
            </button>
            <button onclick="switchTab('facebook')" id="nav-facebook" class="nav-btn group flex flex-col items-center justify-center w-full h-full text-zinc-500 hover:text-blue-400 transition-all duration-300">
                <div class="mb-1 p-1.5 rounded-xl group-hover:bg-white/5 transition-colors">
                    <i data-lucide="facebook" class="w-6 h-6 transition-transform group-active:scale-90"></i>
                </div>
                <span class="text-[10px] font-medium opacity-60">FB</span>
            </button>
             <button onclick="switchTab('tiktok')" id="nav-tiktok" class="nav-btn group flex flex-col items-center justify-center w-full h-full text-zinc-500 hover:text-fuchsia-400 transition-all duration-300">
                <div class="mb-1 p-1.5 rounded-xl group-hover:bg-white/5 transition-colors">
                    <i data-lucide="clapperboard" class="w-6 h-6 transition-transform group-active:scale-90"></i>
                </div>
                <span class="text-[10px] font-medium opacity-60">TikTok</span>
            </button>
            <button onclick="switchTab('dm')" id="nav-dm" class="nav-btn group flex flex-col items-center justify-center w-full h-full text-zinc-500 hover:text-emerald-400 transition-all duration-300">
                <div class="mb-1 p-1.5 rounded-xl group-hover:bg-white/5 transition-colors">
                    <i data-lucide="message-square" class="w-6 h-6 transition-transform group-active:scale-90"></i>
                </div>
                <span class="text-[10px] font-medium opacity-60">Reply</span>
            </button>
        </div>
    </nav>

    <script>
        // Init Icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        function quickDm(text) {
            document.getElementById('dm-input').value = text;
        }

        function switchTab(tabId) {
            // Content Transition
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.add('hidden');
            });
            const selectedTab = document.getElementById('tab-' + tabId);
            selectedTab.classList.remove('hidden');
            
            // Nav State
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-pink-500', 'text-blue-500', 'text-fuchsia-500', 'text-emerald-500', 'text-zinc-500');
                btn.querySelector('span').classList.add('opacity-60');
                btn.querySelector('span').classList.remove('opacity-100');
            });

            const activeBtn = document.getElementById('nav-' + tabId);
            // Default inactive color for others
            document.querySelectorAll('.nav-btn').forEach(btn => {
                 if(btn.id !== 'nav-' + tabId) btn.classList.add('text-zinc-500');
            });

            // Active Color Logic
            if(tabId === 'pose') activeBtn.classList.add('text-pink-500');
            if(tabId === 'facebook') activeBtn.classList.add('text-blue-500');
            if(tabId === 'tiktok') activeBtn.classList.add('text-fuchsia-500');
            if(tabId === 'dm') activeBtn.classList.add('text-emerald-500');
            
            activeBtn.querySelector('span').classList.remove('opacity-60');
            activeBtn.querySelector('span').classList.add('opacity-100');
        }

        async function generateContent(type) {
            const loading = document.getElementById('loading-overlay');
            const outputArea = document.getElementById('result-' + type);
            const outputText = document.getElementById('output-' + type);
            
            outputArea.classList.add('hidden');
            loading.classList.remove('hidden');
            outputText.innerHTML = '';

            let prompt = "";

            // --- ADVANCED PROMPTS FOR BETTER QUALITY ---
            
            if (type === 'pose') {
                const scene = document.getElementById('pose-scene').value;
                const mood = document.getElementById('pose-mood').value;
                const input = document.getElementById('pose-input').value;
                
                prompt = `
                Role: Top-tier Wedding Photographer & Creative Director in Myanmar.
                Task: Provide artistic pose guidance.
                Context:
                - Scene: ${scene}
                - Mood: ${mood}
                - Details: ${input || "General couple"}

                INSTRUCTIONS:
                Write in Burmese (Myanmar).
                Provide a structured response:
                1. **The Concept**: Explain the visual idea briefly.
                2. **Pose Instruction**: Step-by-step body placement (Hands, Eyes, Posture).
                3. **Directing Line**: "Say this to the couple to get the reaction" (e.g., a joke or romantic line).
                
                Keep it practical and easy to follow. Ensure the response is complete.
                `;
            } 
            else if (type === 'facebook') {
                const fbType = document.getElementById('fb-type').value;
                const fbTone = document.getElementById('fb-tone').value;
                const fbInput = document.getElementById('fb-input').value;

                prompt = `
                Role: Senior Social Media Copywriter for 'With You Photo Studio'.
                Task: Write a high-converting Facebook Post in Burmese.
                Type: ${fbType}
                Tone: ${fbTone}
                Topic: ${fbInput || "General Promotion"}

                STRUCTURE (Strictly follow this):
                1. **Headline (Hook)**: Catchy, emotional, or curiosity-driven first line.
                2. **The Story/Body**: 3-4 engaging sentences that connect with the audience's emotions or needs.
                3. **The Offer/Value**: Clear explanation of what is being offered (if promo).
                4. **Call to Action (CTA)**: Clear instruction on how to book (Messenger/Phone).
                5. **Hashtags**: #WithYouStudio #Taunggyi #MyanmarWedding + 5 relevant tags.

                IMPORTANT: Prioritize COMPLETION. Ensure the response is FINISHED and does not cut off. Do not make it too long if it risks cutting off.
                `;
            }
            else if (type === 'tiktok') {
                const ttStyle = document.getElementById('tiktok-style').value;
                const ttInput = document.getElementById('tiktok-input').value;

                prompt = `
                Role: Viral TikTok Content Strategist for a Photo Studio.
                Task: Write a Video Script in Burmese.
                Style: ${ttStyle}
                Topic: ${ttInput || "Studio Vibes"}

                FORMAT (Table-like structure):
                - **0:00-0:03 (Hook)**: [Visual Action] + [Audio/Text Overlay]
                - **0:03-0:15 (Body)**: [Key Visuals] + [Voiceover/Music Sync]
                - **0:15-end (CTA)**: [Final Shot] + [Text: Book Now]

                NOTE: Make it trendy, fast-paced, and suitable for Gen Z audience in Myanmar. Ensure the script is complete.
                `;
            }
            else if (type === 'dm') {
                const tone = document.getElementById('dm-tone').value;
                const message = document.getElementById('dm-input').value;

                prompt = `
                Role: Customer Success Manager at 'With You Photo Studio'.
                Task: Reply to a client message.
                Tone: ${tone}
                Client Says: "${message}"

                INSTRUCTIONS:
                - Write in Burmese.
                - If they ask for price, invite them to visit or offer a call (don't invent fake prices unless specified).
                - Use "With You Photo Studio" name naturally.
                - Closing: Warm sign-off.
                - Keep it polite and complete.
                `;
            }

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt })
                });

                if (!response.ok) throw new Error('Network response was not ok');

                const data = await response.json();
                const aiText = data.result || data.text || "No response text found.";
                
                if (!aiText || aiText.length < 5) {
                    outputText.innerHTML = '<p class="text-pink-400">Response was empty. Please try again.</p>';
                } else {
                    outputText.innerHTML = marked.parse(aiText);
                }
                
                outputArea.classList.remove('hidden');

            } catch (error) {
                console.error('Error:', error);
                alert("·ÄÖ·Äî·ÄÖ·Ä∫·ÄÅ·Äª·Ä≠·ÄØ·Ä∑·Äö·ÄΩ·ÄÑ·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫·Åã ·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç ·ÄÅ·Äè·Ä°·ÄÄ·Äº·Ä¨·Äô·Äæ ·Äï·Äº·Äî·Ä∫·ÄÖ·Äô·Ä∫·Ä∏·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´·Åã");
            } finally {
                loading.classList.add('hidden');
            }
        }

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text).then(() => {
                // Feedback animation could go here
            });
        }
    </script>
</body>
</html>
